!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=34)}([function(e,t){e.exports=ex},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(30),i="/hackathon-2018.1-team30";class s{static values(){return Object.values(s)}}s.Audi=new r.Texture(i+"/assets/sprites/audi.png"),s.Chickens=new r.Texture(i+"/assets/sprites/chickens.png"),s.Chickens2=new r.Texture(i+"/assets/sprites/jODGJn4.png"),s.DudeNude=new r.Texture(i+"/assets/sprites/dude_nude.png"),s.Level1=new o.default(i+"/assets/levels/1.json"),s.Aim=new r.Texture(i+"/assets/sprites/aim.png"),s.Slawwan=new r.Texture(i+"/assets/sprites/slava.png"),s.SlawwanGrean=new r.Texture(i+"/assets/sprites/slava_green_magenta.png"),s.SlawwanViolet=new r.Texture(i+"/assets/sprites/slava_violet_red.png"),s.SlawwanYellow=new r.Texture(i+"/assets/sprites/slava_yellow.png"),s.Blood1=new r.Texture(i+"/assets/sprites/blood_1.png"),s.Blood2=new r.Texture(i+"/assets/sprites/blood_2.png"),s.Boom=new r.Texture(i+"/assets/sprites/explosion.png"),s.Swabra=new r.Texture(i+"/assets/sprites/fusoyamop1.png"),s.Sword1=new r.Texture(i+"/assets/sprites/sword1.png"),s.Sword2=new r.Texture(i+"/assets/sprites/sword2.png"),s.Extern=new r.Texture(i+"/assets/sprites/logo-kontur.extern.png"),s.Laser=new r.Texture(i+"/assets/sprites/Laser_Red_Thick_512.png"),s.Poop=new r.Texture(i+"/assets/sprites/CitsJlB.png"),s.MainTheme=new r.Sound(i+"/assets/be8a7cc0fe85da.mp3"),s.Chicken=new r.Sound(i+"/assets/chicken.mp3"),s.Explosion=new r.Sound(i+"/assets/Explosion.mp3"),s.LaserSable=new r.Sound(i+"/assets/05092.mp3"),t.Resources=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=class extends r.Actor{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new(n(28).HubConnection)("http://10.33.94.6:4844/game");r.onclose(()=>{console.log("Пичаль")});class o{static storeScores(e){this.scores=e}static countPlayers(){return Object.keys(this.otherUsers).length+2}static get connection(){return r}static start(){r.start().then(()=>o.joinGame())}static getCurrentUser(){return o.currentUser}static saveUser(e){o.currentUser=e}static saveFowl(e){o.fowls[e.user.id]=e}static saveOtherPlayer(e){o.otherUsers[e.user.id]=e}static getUserById(e){if(o.currentUser&&o.currentUser.user.id===e)return o.currentUser.user;const t=o.otherUsers[e];if(t)return t.user;const n=o.fowls[e];return n?n.user:null}static getActor(e){if(o.currentUser&&o.currentUser.user.id===e)return o.currentUser.actor;const t=o.otherUsers[e];if(t)return t.actor;const n=o.fowls[e];return n?n.actor:null}static userInGame(e){return o.currentUser&&o.currentUser.user.id===e||null!=o.otherUsers[e]}static fowlInGame(e){return!!o.fowls[e]}static fire(e,t){r.invoke("attackGameObject",e,t)}static move(e,t){r.invoke("moveGameObject",e,t)}static kickUser(e){o.otherUsers&&e&&delete o.otherUsers[e.id],o.fowlInGame&&e&&delete o.fowls[e.id]}static kickCurrentUser(){const e=o.getCurrentUser().actor;e&&e.kill()}static killFowl(e){if(o.fowls&&e){const t=Object.keys(o.fowls).map(e=>o.fowls[e]).find(t=>t.actor===e);t&&r.invoke("killGameObject",this.currentUser.user.id,t.user.id)}}static removeFowl(e){delete o.fowls[e]}static joinGame(){r.invoke("joinGame")}}o.scores=[],o.currentUser=null,o.otherUsers={},o.fowls={},t.GameService=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);class o extends r.Actor{constructor(){super(...arguments),this.direction=r.Vector.Zero.clone(),this.drawDirection="down",this.drawState="idle",this.updateDrawState=(()=>{this.setDrawing(`${this.drawState}_${this.drawDirection}`)})}update(e,t){super.update(e,t),this.updateDirection()}registerDrawing(e){for(const t in e){const n=e[t];for(const e in n){const r=n[e];this.addDrawing(`${t}_${e}`,r)}}}updateDirection(){this.direction.equals(r.Vector.Zero)?this.drawState="idle":(this.drawState="walk",this.drawDirection=o.getDrawDirection(this.direction)),this.updateDrawState()}static getDrawDirection(e){return e.y<0?0===e.x?"up":e.x>0?"up_right":"up_left":e.y>0?0===e.x?"down":e.x>0?"down_right":"down_left":0===e.x?"down":e.x>0?"right":"left"}}t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=class extends r.Label{constructor(e,t,n){super(`${n>0?"+":""}${n}`,e,t,"15px Origa"),this.time=0,this.color=n>0?r.Color.Green:r.Color.Red}update(e,t){this.y=this.y-t/1500,this.scale=this.scale.scale(1.03),this.time+=t,this.time>1500&&this.kill()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=document.createElement("div"),i=document.createElement("style");i.innerHTML='\n@font-face {\n  font-family: "Origa";\n  src: url("origa.ttf");\n}\n',document.head.appendChild(i),Object.assign(o.style,{position:"fixed",width:"100vw",height:"100vh",top:0,left:0,boxShadow:"inset 0 0 50px 12px rgba(0,0,0,0.3)",fontFamily:"Origa",cursor:"none"});const s=document.createElement("div");Object.assign(s.style,{position:"fixed",width:"100vw",height:"100vh",top:0,left:0,background:"rgba(0,0,0,1)",transition:"background-color 0.2s ease-out",display:"none"}),o.appendChild(s);const a=document.createElement("div");Object.assign(a.style,{padding:"60px 40px",background:"rgba(255,255,255,0.7)",height:"100vh",boxSizing:"border-box",opacity:1,transition:"opacity 0.2s ease-out",textAlign:"center",color:"#333"}),a.innerHTML='\n  <h1 style="text-align: center;font-size: 120px;letter-spacing: 3px;font-weight: 300; width: 900px; margin: auto">Slawwan & DICH</h1>\n  <h2 style="font-size: 60px;">Waiting for players</h2>\n  <ul style="text-align: left; width: 200px; margin: auto; font-size: 40px">\n    <li>Ready</li>\n    <li>....</li>\n    <li>....</li>\n    <li>....</li>\n  </ul>\n';const c=document.createElement("div");Object.assign(c.style,{position:"fixed",left:"100px",top:"100px",fontSize:"50px",transition:"transform 0.2s ease-in"});const l=document.createElement("div");Object.assign(l.style,{position:"fixed",left:"100px",top:"200px",fontSize:"20px",background:"rgba(255, 255, 255, 0.5)"});const u=document.createElement("div");Object.assign(u.style,{position:"fixed",left:"50%",top:"-300px",fontSize:"60px",padding:"20px",background:"rgba(255, 255, 255, 0.5)",transform:"translateX(-50%)",transition:"top 0.2s ease-in",fontFamily:"Origa",textAlign:"center"});class h{static init(){return document.body.appendChild(o),document.body.appendChild(u),h}static showLoader(){return s.style.display="block",h}static hideLoader(){return s.style.background="rgba(0,0,0,0)",h}static showWelcome(){return o.appendChild(a),h}static hideWelcome(){return a.style.opacity="0",setTimeout(()=>{o.removeChild(a)},200),h}static setPlayersCount(e){return a.querySelectorAll("li").forEach(t=>{--e>0?t.innerText="Ready":t.innerText="..."}),h}static showScore(){return o.appendChild(c),o.appendChild(l),h}static updateScore(e){const t=e.find(e=>e.gameObjectId===r.GameService.getCurrentUser().user.id),n=t.scores;return c.innerText!==n.toString()&&(c.style.transform="scale(1.2)",setTimeout(()=>{c.style.transform="scale(1)"},50)),c.innerText=n.toString(),n>500&&n<1e3?c.style.color="yellow":n>=1e3&&n<2e3?c.style.color="orange":n>=2e3&&(c.style.color="red"),l.innerHTML=`\n      <table>\n        ${e.filter(e=>e.gameObjectId!==t.gameObjectId).map(({gameObjectId:e,scores:t},n)=>`<tr>\n          <td>Player ${n+1}:</td><td>${t}</td>\n        </tr>`)}\n      </table>\n    `,h}static showNotification(e){u.innerText=e,u.style.top="100px"}static hideNotification(){u.innerText="",u.style.top="-300px"}}t.GUI=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=class extends r.Actor{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=n(2);t.default=class extends i.default{constructor(e){super(0,0,50,230),this.positionProvider=e,this.target=r.Vector.Zero,this.collisionType=r.CollisionType.Passive,this.anchor=new r.Vector(this.anchor.x,0)}onInitialize(e){this.pos=this.positionProvider(),this.addDrawing("idle",o.Resources.Swabra.asSprite()),this.setDrawing("idle")}update(e,t){super.update(e,t);const n=this.positionProvider(),r=this.target.normalize();this.pos=n.add(r.scale(5)),this.body.rotation=this.target.toAngle()-Math.PI/2}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=3,s=new r.Random,a=[o.Resources.Slawwan,o.Resources.SlawwanGrean,o.Resources.SlawwanViolet,o.Resources.SlawwanYellow];function c(e,t=0){return i*e+t}t.spriteSheetFactory=(()=>new r.SpriteSheet(a[s.nextInt()%a.length],i,8,128,128)),t.default=(()=>{const e=t.spriteSheetFactory();return{width:128,height:128,columns:i,rows:8,idle:{down:()=>e.getSprite(c(4)),down_left:()=>e.getSprite(c(1)),down_right:()=>e.getSprite(c(6)),up:()=>e.getSprite(c(0)),up_left:()=>e.getSprite(c(7)),up_right:()=>e.getSprite(c(5)),left:()=>e.getSprite(c(2)),right:()=>e.getSprite(c(3))},walk:{left:(t,n=75)=>e.getAnimationBetween(t,c(2),c(2,2),n),right:(t,n=75)=>e.getAnimationBetween(t,c(3),c(3,2),n),up:(t,n=75)=>e.getAnimationBetween(t,c(0),c(0,2),n),down:(t,n=75)=>e.getAnimationBetween(t,c(4),c(4,2),n),up_left:(t,n=75)=>e.getAnimationBetween(t,c(7),c(7,2),n),up_right:(t,n=75)=>e.getAnimationBetween(t,c(5),c(5,2),n),down_left:(t,n=75)=>e.getAnimationBetween(t,c(1),c(1,2),n),down_right:(t,n=75)=>e.getAnimationBetween(t,c(6),c(6,2),n)}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=class extends r.Label{constructor(e,t,n){super(n.toString(),e,t,"15px Origa"),this.value=n}update(e,t){this.text=this.value.toString(),this.scale=this.scale.scale(this.value/1e4+1),this.value<1e3?this.color=r.Color.White:this.value<5e3?this.color=r.Color.Yellow:this.value<1e4?this.color=r.Color.Orange:this.color=r.Color.Red}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=new r.SpriteSheet(o.Resources.Boom,5,5,64,64);t.boomAnimation=((e,t=50)=>i.getAnimationBetween(e,0,24,t))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(11);t.default=class extends r.Actor{constructor(e,t,n){super(e,t),this.killCallback=n,this.killCallback=n}onInitialize(e){this.addDrawing("boom",o.boomAnimation(e,50)),this.setDrawing("boom"),setTimeout(()=>{this.killCallback()},300)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=8;function s(e,t=0){return i*e+t}t.poopSpriteSheet=new r.SpriteSheet(o.Resources.Poop,i,7,64,64),t.default={width:64,height:64,columns:i,rows:7,idle:{down:(e,n=75)=>t.poopSpriteSheet.getAnimationBetween(e,s(3,0),s(3,5),n)},dead:(e,n=75)=>t.poopSpriteSheet.getAnimationBetween(e,s(5,0),s(6,7),n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(13),i=n(12),s=n(3),a=n(4),c=n(1),l=n(7),u=n(5),h=n(2);t.default=class extends l.default{constructor(e,t){super(e,t,o.default.width,o.default.height,r.Color.White),this.boom=null,this.collisionType=r.CollisionType.Passive}onInitialize(e){super.onInitialize(e),this.addDrawing("down",o.default.idle.down(e)),this.addDrawing("death",o.default.dead(e)),this.setDrawing("down"),this.on("precollision",t=>{if(t&&(t.other instanceof a.default||t.other instanceof h.default)){s.GameService.killFowl(t.actor),e.currentScene.camera.shake(5,5,100);const n=new u.default(this.x,this.y,-1);e.currentScene.add(n),this.kill()}})}kill(){null==this.boom&&(c.Resources.Explosion.play(.6),this.setDrawing("death"),this.boom=new i.default(0,0,()=>{null!=this.boom&&this.remove(this.boom)}),this.boom.scale=new r.Vector(5,5),this.add(this.boom),setTimeout(()=>super.kill(),900))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=new r.SpriteSheet(o.Resources.Blood1,6,1,70,70),s=new r.SpriteSheet(o.Resources.Blood2,6,1,70,70);t.bloodAnimation=((e,t=50)=>i.getAnimationBetween(e,0,6,t)),t.bloodAnimation2=((e,t=50)=>s.getAnimationBetween(e,0,6,t))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=12,s=new r.Random;t.chickenSpriteSheet=new r.SpriteSheet(o.Resources.Chickens2,i,8,48,48),t.default={width:48,height:48,columns:i,rows:8,get:(e,n=50)=>{const r=s.integer(0,7);return t.chickenSpriteSheet.getAnimationBetween(e,3*r,3*r+2,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(16),i=n(15),s=n(3),a=n(4),c=n(1),l=n(7),u=n(5),h=n(2);t.default=class extends l.default{constructor(e,t){super(e,t,o.default.width,o.default.height),this.isDying=!1,this.collisionType=r.CollisionType.Passive}onInitialize(e){super.onInitialize(e),this.addDrawing("up",o.default.get(e,150)),this.addDrawing("down",o.default.get(e,150)),this.addDrawing("left",o.default.get(e,150)),this.addDrawing("right",o.default.get(e,150)),this.addDrawing("death",i.bloodAnimation(e)),this.addDrawing("death2",i.bloodAnimation2(e)),this.setDrawing(["up","down","left","right"][(new r.Random).integer(0,3)]),this.on("precollision",t=>{if(t&&(t.other instanceof a.default||t.other instanceof h.default)){s.GameService.killFowl(t.actor),e.currentScene.camera.shake(5,5,100);const n=new u.default(this.x,this.y,10);e.currentScene.add(n),this.kill()}})}kill(){this.isDying||(c.Resources.Chicken.play(),this.isDying=!0,this.setDrawing(["death","death2"][(new r.Random).integer(0,1)]),setTimeout(()=>{super.kill()},250))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=n(2);t.default=class extends i.default{constructor(e){super(0,0,1600,600),this.positionProvider=e,this.target=r.Vector.Zero,this.collisionType=r.CollisionType.Passive,this.anchor=new r.Vector(0,this.anchor.y)}onInitialize(e){this.pos=this.positionProvider(),this.scale=this.scale.scale(2),this.addDrawing("idle",o.Resources.Extern.asSprite()),this.setDrawing("idle")}update(e,t){super.update(e,t);const n=this.positionProvider(),r=this.target.normalize();this.pos=n.add(r.scale(5)),this.body.rotation=this.target.toAngle()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=n(2);t.default=class extends i.default{constructor(e){super(0,0,1e3,350),this.positionProvider=e,this.target=r.Vector.Zero,this.collisionType=r.CollisionType.Passive,this.anchor=new r.Vector(0,this.anchor.y)}onInitialize(e){this.pos=this.positionProvider(),this.addDrawing("idle",o.Resources.Sword2.asSprite()),this.setDrawing("idle")}update(e,t){super.update(e,t);const n=this.positionProvider(),r=this.target.normalize();this.pos=n.add(r.scale(5)),this.body.rotation=this.target.toAngle()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=n(2);t.default=class extends i.default{constructor(e){super(0,0,800,200),this.positionProvider=e,this.target=r.Vector.Zero,this.collisionType=r.CollisionType.Passive,this.anchor=new r.Vector(0,this.anchor.y)}onInitialize(e){this.pos=this.positionProvider(),this.scale=this.scale.scale(.8),this.addDrawing("idle",o.Resources.Sword1.asSprite()),this.setDrawing("idle")}update(e,t){super.update(e,t);const n=this.positionProvider(),r=this.target.normalize();this.pos=n.add(r.scale(5)),this.body.rotation=this.target.toAngle()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=300;t.Aim=class extends r.Actor{constructor(){super(...arguments),this.target=r.Vector.Zero}onInitialize(e){this.addDrawing(o.Resources.Aim)}update(e,t){const n=this.parent.pos,o=this.target.sub(n),s=Math.min(i,o.distance());this.pos=new r.Vector(0,s).rotate(o.toAngle()).rotate(-Math.PI/2)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=new r.SpriteSheet(o.Resources.Laser,1,11,200,50);t.laserAnimation=((e,t=50)=>i.getAnimationBetween(e,0,10,t))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(22),i=n(2),s=n(1);t.default=class extends i.default{constructor(e){super(0,0,400,50),this.positionProvider=e,this.target=r.Vector.Zero,this.collisionType=r.CollisionType.Passive,this.anchor=new r.Vector(0,this.anchor.y)}onInitialize(e){this.pos=this.positionProvider(),this.addDrawing("idle",o.laserAnimation(e)),this.setDrawing("idle")}update(e,t){super.update(e,t),s.Resources.LaserSable.isPlaying()||s.Resources.LaserSable.play();const n=this.positionProvider(),r=this.target.normalize();this.pos=n.add(r.scale(1)),this.body.rotation=this.target.toAngle()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(9),i=n(4),s=n(23),a=n(3),c=n(21),l=n(8),u=n(6),h=n(2),p=n(5),d=n(20),f=n(19),g=n(18),v=o.default();class w extends i.default{constructor(e,t){super(e,t,v.width,v.height),this.speed=7,this.laserSable=null,this.swabra=null,this.sword1=null,this.sword2=null,this.extern=null,this.aim=null,this.stanTime=0,this.score=0,this.stanLable=null,this.sendingDelta=0,this.lastSentPosition=r.Vector.Zero,this.level=5,this.handleKeyPress=(e=>{const t=w.getDirections(e&&e.key||r.Input.Keys.Semicolon);this.direction.addEqual(t)}),this.handleKeyRelease=(e=>{const t=w.getDirections(e&&e.key||r.Input.Keys.Semicolon);this.direction.subEqual(t)}),this.collisionType=r.CollisionType.Active;const n=new r.Actor(e,t,20,60).collisionArea;n.body=this.body,this.collisionArea=n}onInitialize(e){super.onInitialize(e),this.aim=new c.Aim,this.add(this.aim),this.registerDrawing({idle:{up:v.idle.up(),down:v.idle.down(),right:v.idle.right(),left:v.idle.left(),up_left:v.idle.up_left(),up_right:v.idle.up_right(),down_left:v.idle.down_left(),down_right:v.idle.down_left()},walk:{up:v.walk.up(e,50),up_right:v.walk.up_right(e,50),up_left:v.walk.up_left(e,50),down:v.walk.down(e,50),down_right:v.walk.down_right(e,50),down_left:v.walk.down_left(e,50),right:v.walk.right(e,50),left:v.walk.left(e,50)}}),e.input.keyboard.on("press",this.handleKeyPress),e.input.keyboard.on("release",this.handleKeyRelease),e.input.pointers.primary.on("down",()=>{1==this.level&&null==this.swabra&&(this.swabra=new l.default(()=>this.pos),e.currentScene.add(this.swabra)),2==this.level&&null==this.laserSable&&(this.laserSable=new s.default(()=>this.pos),e.currentScene.add(this.laserSable)),3==this.level&&null==this.sword1&&(this.sword1=new d.default(()=>this.pos),e.currentScene.add(this.sword1)),4==this.level&&null==this.sword2&&(this.sword2=new f.default(()=>this.pos),e.currentScene.add(this.sword2)),5==this.level&&null==this.extern&&(this.extern=new g.default(()=>this.pos),e.currentScene.add(this.extern))}),e.input.pointers.primary.on("up",()=>{null!=this.laserSable&&(this.laserSable.kill(),this.laserSable=null),null!=this.swabra&&(this.swabra.kill(),this.swabra=null),null!=this.sword1&&(this.sword1.kill(),this.sword1=null),null!=this.sword2&&(this.sword2.kill(),this.sword2=null),null!=this.extern&&(this.extern.kill(),this.extern=null)}),this.on("postcollision",t=>{t&&t.other instanceof h.default&&(e.currentScene.add(new p.default(t.actor.x,t.actor.y,-100)),e.currentScene.add(new p.default(t.other.x,t.other.y,100)),t.other instanceof s.default?this.stanTime=3e3:t.other instanceof l.default&&(this.stanTime=1e3))})}update(e,t){super.update(e,t),this.score>=100&&this.level<1&&(u.GUI.showNotification("You have received SWABRA"),this.level=1,this.speed+=1,setInterval(u.GUI.hideNotification,7e3)),this.score>=500&&this.level<2&&(u.GUI.showNotification("You have received LASER!!!"),this.level=2,this.speed+=1,setInterval(u.GUI.hideNotification,7e3)),this.score>=1e3&&this.level<3&&(u.GUI.showNotification("You have received SWORD1!!!"),this.level=3,this.speed+=2,setInterval(u.GUI.hideNotification,7e3)),this.score>=2e3&&this.level<4&&(u.GUI.showNotification("You have received SWORD2!!!"),this.level=4,this.speed+=2,setInterval(u.GUI.hideNotification,7e3)),this.score>=7e3&&this.level<5&&(u.GUI.showNotification("This is KONTUR EXTERN!!!"),this.level=5,this.speed+=5,setInterval(u.GUI.hideNotification,7e3)),0!=this.stanTime?(this.stanTime-=t,null==this.stanLable&&(this.stanLable=new r.Label("STAN",this.x,this.y+100),e.currentScene.add(this.stanLable))):this.stanLable&&(e.currentScene.remove(this.stanLable),this.stanLable=null);const n=e.input.pointers.primary.lastWorldPos;n&&(this.aim&&(this.aim.target=n,this.laserSable?this.laserSable.target=this.aim.pos:this.swabra?this.swabra.target=this.aim.pos:this.sword1?this.sword1.target=this.aim.pos:this.sword2?this.sword2.target=this.aim.pos:this.extern&&(this.extern.target=this.aim.pos)),this.pos.addEqual(this.direction.scale(this.speed)),this.sendDataIfNeeded(t))}sendDataIfNeeded(e){this.sendingDelta+=e,this.sendingDelta>15&&(this.lastSentPosition.sub(this.pos).equals(r.Vector.Zero)||a.GameService.move(a.GameService.getCurrentUser().user.id,this.pos),this.laserSable&&this.aim&&a.GameService.fire(a.GameService.getCurrentUser().user.id,this.aim.pos),this.sendingDelta=0)}}w.getDirections=(e=>{switch(e){case r.Input.Keys.A:return r.Vector.Left;case r.Input.Keys.W:return r.Vector.Up;case r.Input.Keys.D:return r.Vector.Right;case r.Input.Keys.S:return r.Vector.Down;default:return r.Vector.Zero}}),t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Player=0]="Player",e[e.Fowl=1]="Fowl",e[e.Shit=2]="Shit"}(t.GameObjectType||(t.GameObjectType={}))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,l=[],u=!1,h=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&d())}function d(){if(!u){var e=a(p);u=!0;for(var t=l.length;t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t,n){
/* @license
 * Copyright (c) .NET Foundation. All rights reserved.
 * Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 */var r;r=function(){"use strict";var e="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function r(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}i(function(t,o){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.2+97478eb6
 */
t.exports=function(){function t(e){return"function"==typeof e}var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,s=void 0,a=void 0,c=function(e,t){g[i]=e,g[i+1]=t,2===(i+=2)&&(a?a(v):S())},l="undefined"!=typeof window?window:void 0,u=l||{},h=u.MutationObserver||u.WebKitMutationObserver,p="undefined"==typeof self&&void 0!==n&&"[object process]"==={}.toString.call(n),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(v,1)}}var g=new Array(1e3);function v(){for(var e=0;e<i;e+=2){var t=g[e],n=g[e+1];t(n),g[e]=void 0,g[e+1]=void 0}i=0}var w,y,m,b,S=void 0;function _(e,t){var n=this,r=new this.constructor(P);void 0===r[x]&&W(r);var o=n._state;if(o){var i=arguments[o-1];c(function(){return H(o,r,i,n._result)})}else U(n,r,e,t);return r}function T(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(P);return I(t,e),t}p?S=function(){return n.nextTick(v)}:h?(y=0,m=new h(v),b=document.createTextNode(""),m.observe(b,{characterData:!0}),S=function(){b.data=y=++y%2}):d?((w=new MessageChannel).port1.onmessage=v,S=function(){return w.port2.postMessage(0)}):S=void 0===l?function(){try{var e=r,t=e("vertx");return void 0!==(s=t.runOnLoop||t.runOnContext)?function(){s(v)}:f()}catch(e){return f()}}():f();var x=Math.random().toString(36).substring(16);function P(){}var k=void 0,O=1,A=2,L=new R;function j(e){try{return e.then}catch(e){return L.error=e,L}}function C(e,n,r){n.constructor===e.constructor&&r===_&&n.constructor.resolve===T?function(e,t){t._state===O?E(e,t._result):t._state===A?G(e,t._result):U(t,void 0,function(t){return I(e,t)},function(t){return G(e,t)})}(e,n):r===L?(G(e,L.error),L.error=null):void 0===r?E(e,n):t(r)?function(e,t,n){c(function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?I(e,n):E(e,n))},function(t){r||(r=!0,G(e,t))},e._label);!r&&o&&(r=!0,G(e,o))},e)}(e,n,r):E(e,n)}function I(e,t){var n,r;e===t?G(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?E(e,t):C(e,t,j(t)))}function M(e){e._onerror&&e._onerror(e._result),D(e)}function E(e,t){e._state===k&&(e._result=t,e._state=O,0!==e._subscribers.length&&c(D,e))}function G(e,t){e._state===k&&(e._state=A,e._result=t,c(M,e))}function U(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+O]=n,o[i+A]=r,0===i&&e._state&&c(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?H(n,r,o,i):o(i);e._subscribers.length=0}}function R(){this.error=null}var F=new R;function H(e,n,r,o){var i=t(r),s=void 0,a=void 0,c=void 0,l=void 0;if(i){if((s=function(e,t){try{return e(t)}catch(e){return F.error=e,F}}(r,o))===F?(l=!0,a=s.error,s.error=null):c=!0,n===s)return void G(n,new TypeError("A promises callback cannot return that same promise."))}else s=o,c=!0;n._state!==k||(i&&c?I(n,s):l?G(n,a):e===O?E(n,s):e===A&&G(n,s))}var N=0;function W(e){e[x]=N++,e._state=void 0,e._result=void 0,e._subscribers=[]}var B=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(P),this.promise[x]||W(this.promise),o(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&E(this.promise,this._result))):G(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===k&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===T){var o=j(e);if(o===_&&e._state!==k)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===z){var i=new n(P);C(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===k&&(this._remaining--,e===A?G(r,n):this._result[t]=n),0===this._remaining&&E(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;U(e,void 0,function(e){return n._settledAt(O,t,e)},function(e){return n._settledAt(A,t,e)})},e}(),z=function(){function e(t){this[x]=N++,this._result=this._state=void 0,this._subscribers=[],P!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){I(e,t)},function(t){G(e,t)})}catch(t){G(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},e}();return z.prototype.then=_,z.all=function(e){return new B(this,e).promise},z.race=function(e){var t=this;return o(e)?new t(function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},z.resolve=T,z.reject=function(e){var t=new this(P);return G(t,e),t},z._setScheduler=function(e){a=e},z._setAsap=function(e){c=e},z._asap=c,z.polyfill=function(){var t=void 0;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=z},z.Promise=z,z.polyfill(),z}()});var s=i(function(t,n){var r,o=e&&e.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(t,n){var r=e.call(this,t)||this;return r.statusCode=n,r}return o(t,e),t}(Error);n.HttpError=i;var s=function(e){function t(t){return void 0===t&&(t="A timeout occurred."),e.call(this,t)||this}return o(t,e),t}(Error);n.TimeoutError=s});o(s);s.HttpError,s.TimeoutError;var a=i(function(t,n){var r,o=e&&e.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=e&&e.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(n,"__esModule",{value:!0});var a=function(){return function(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}}();n.HttpResponse=a;var c=function(){function e(){}return e.prototype.get=function(e,t){return this.send(i({},t,{method:"GET",url:e}))},e.prototype.post=function(e,t){return this.send(i({},t,{method:"POST",url:e}))},e}();n.HttpClient=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.send=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.headers&&e.headers.forEach(function(e,t){return r.setRequestHeader(t,e)}),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=function(){r.abort()}),e.timeout&&(r.timeout=e.timeout),r.onload=function(){e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?t(new a(r.status,r.statusText,r.response||r.responseText)):n(new s.HttpError(r.statusText,r.status))},r.onerror=function(){n(new s.HttpError(r.statusText,r.status))},r.ontimeout=function(){n(new s.TimeoutError)},r.send(e.content||"")})},t}(c);n.DefaultHttpClient=l});o(a);a.HttpResponse,a.HttpClient,a.DefaultHttpClient;var c=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Trace=0]="Trace",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.None=4]="None"}(t.LogLevel||(t.LogLevel={}))});o(c);c.LogLevel;var l=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.isAborted=!1}return e.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(e.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),e}();t.AbortController=n});o(l);l.AbortController;var u=i(function(t,n){var r=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=e&&e.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.WebSockets=0]="WebSockets",e[e.ServerSentEvents=1]="ServerSentEvents",e[e.LongPolling=2]="LongPolling"}(n.TransportType||(n.TransportType={}));var i=function(){function e(e,t){this.logger=t,this.accessTokenFactory=e||function(){return null}}return e.prototype.connect=function(e,t,n){var r=this;return new Promise(function(n,o){e=e.replace(/^http/,"ws");var i=r.accessTokenFactory();i&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(i));var s=new WebSocket(e);2==t&&(s.binaryType="arraybuffer"),s.onopen=function(o){r.logger.log(c.LogLevel.Information,"WebSocket connected to "+e),r.webSocket=s,n(t)},s.onerror=function(e){o()},s.onmessage=function(e){r.logger.log(c.LogLevel.Trace,"(WebSockets transport) data received: "+e.data),r.onreceive&&r.onreceive(e.data)},s.onclose=function(e){r.onclose&&r.webSocket&&(!1===e.wasClean||1e3!==e.code?r.onclose(new Error("Websocket closed with status code: "+e.code+" ("+e.reason+")")):r.onclose())}})},e.prototype.send=function(e){return this.webSocket&&this.webSocket.readyState===WebSocket.OPEN?(this.webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},e.prototype.stop=function(){return this.webSocket&&(this.webSocket.close(),this.webSocket=null),Promise.resolve()},e}();n.WebSocketTransport=i;var a=function(){function e(e,t,n){this.httpClient=e,this.accessTokenFactory=t||function(){return null},this.logger=n}return e.prototype.connect=function(e,t,n){var r=this;return"undefined"==typeof EventSource&&Promise.reject("EventSource not supported by the browser."),this.url=e,new Promise(function(t,n){var o=r.accessTokenFactory();o&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(o));var i=new EventSource(e);try{i.onmessage=function(e){if(r.onreceive)try{r.logger.log(c.LogLevel.Trace,"(SSE transport) data received: "+e.data),r.onreceive(e.data)}catch(e){return void(r.onclose&&r.onclose(e))}},i.onerror=function(e){n(),r.eventSource&&r.onclose&&r.onclose(new Error(e.message||"Error occurred"))},i.onopen=function(){r.logger.log(c.LogLevel.Information,"SSE connected to "+r.url),r.eventSource=i,t(1)}}catch(e){return Promise.reject(e)}})},e.prototype.send=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,h(this.httpClient,this.url,this.accessTokenFactory,e)]})})},e.prototype.stop=function(){return this.eventSource&&(this.eventSource.close(),this.eventSource=null),Promise.resolve()},e}();n.ServerSentEventsTransport=a;var u=function(){function e(e,t,n){this.httpClient=e,this.accessTokenFactory=t||function(){return null},this.logger=n,this.pollAbort=new l.AbortController}return e.prototype.connect=function(e,t,n){if(this.url=e,n.features.inherentKeepAlive=!0,2===t&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return this.poll(this.url,t),Promise.resolve(t)},e.prototype.poll=function(e,t){return r(this,void 0,void 0,function(){var n,r,i,a,l;return o(this,function(o){switch(o.label){case 0:n={timeout:12e4,abortSignal:this.pollAbort.signal,headers:new Map},2===t&&(n.responseType="arraybuffer"),(r=this.accessTokenFactory())&&n.headers.set("Authorization","Bearer "+r),o.label=1;case 1:if(this.pollAbort.signal.aborted)return[3,6];o.label=2;case 2:return o.trys.push([2,4,,5]),i=e+"&_="+Date.now(),this.logger.log(c.LogLevel.Trace,"(LongPolling transport) polling: "+i),[4,this.httpClient.get(i,n)];case 3:return 204===(a=o.sent()).statusCode?(this.logger.log(c.LogLevel.Information,"(LongPolling transport) Poll terminated by server"),this.onclose&&this.onclose(),this.pollAbort.abort()):200!==a.statusCode?(this.logger.log(c.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+a.statusCode),this.onclose&&this.onclose(new s.HttpError(a.statusText,a.statusCode)),this.pollAbort.abort()):a.content?(this.logger.log(c.LogLevel.Trace,"(LongPolling transport) data received: "+a.content),this.onreceive&&this.onreceive(a.content)):this.logger.log(c.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,5];case 4:return(l=o.sent())instanceof s.TimeoutError?this.logger.log(c.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.onclose&&this.onclose(l),this.pollAbort.abort()),[3,5];case 5:return[3,1];case 6:return[2]}})})},e.prototype.send=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,h(this.httpClient,this.url,this.accessTokenFactory,e)]})})},e.prototype.stop=function(){return this.pollAbort.abort(),Promise.resolve()},e}();function h(e,t,n,i){return r(this,void 0,void 0,function(){var r;return o(this,function(o){switch(o.label){case 0:return n()&&(r=new Map).set("Authorization","Bearer "+n()),[4,e.post(t,{content:i,headers:r})];case 1:return o.sent(),[2]}})})}n.LongPollingTransport=u});o(u);u.TransportType,u.WebSocketTransport,u.ServerSentEventsTransport,u.LongPollingTransport;var h=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.log=function(e,t){},e}();t.NullLogger=n;var r=function(){function e(e){this.minimumLogLevel=e}return e.prototype.log=function(e,t){if(e>=this.minimumLogLevel)switch(e){case c.LogLevel.Error:console.error(c.LogLevel[e]+": "+t);break;case c.LogLevel.Warning:console.warn(c.LogLevel[e]+": "+t);break;case c.LogLevel.Information:console.info(c.LogLevel[e]+": "+t);break;default:console.log(c.LogLevel[e]+": "+t)}},e}();t.ConsoleLogger=r,function(e){e.createLogger=function(e){return void 0===e?new r(c.LogLevel.Information):null===e?new n:e.log?e:new r(e)}}(t.LoggerFactory||(t.LoggerFactory={}))});o(h);h.NullLogger,h.ConsoleLogger,h.LoggerFactory;var p=i(function(t,n){var r=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=e&&e.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){void 0===t&&(t={}),this.features={},this.logger=h.LoggerFactory.createLogger(t.logger),this.baseUrl=this.resolveUrl(e),(t=t||{}).accessTokenFactory=t.accessTokenFactory||function(){return null},this.httpClient=t.httpClient||new a.DefaultHttpClient,this.connectionState=2,this.options=t}return e.prototype.start=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return 2!==this.connectionState?[2,Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state."))]:(this.connectionState=0,this.startPromise=this.startInternal(),[2,this.startPromise])})})},e.prototype.startInternal=function(){return r(this,void 0,void 0,function(){var e,t,n,r,i,s,a,l=this;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),this.options.transport!==u.TransportType.WebSockets?[3,1]:(this.url=this.baseUrl,this.transport=this.createTransport(this.options.transport,[u.TransportType[u.TransportType.WebSockets]]),[3,3]);case 1:return e=void 0,(t=this.options.accessTokenFactory())&&(e=new Map).set("Authorization","Bearer "+t),[4,this.httpClient.post(this.resolveNegotiateUrl(this.baseUrl),{content:"",headers:e})];case 2:if(n=o.sent(),r=JSON.parse(n.content),this.connectionId=r.connectionId,2==this.connectionState)return[2];this.connectionId&&(this.url=this.baseUrl+(-1===this.baseUrl.indexOf("?")?"?":"&")+"id="+this.connectionId,this.transport=this.createTransport(this.options.transport,r.availableTransports)),o.label=3;case 3:return this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return l.stopConnection(!0,e)},i=2===this.features.transferMode?2:1,s=this.features,[4,this.transport.connect(this.url,i,this)];case 4:return s.transferMode=o.sent(),this.changeState(0,1),[3,6];case 5:throw a=o.sent(),this.logger.log(c.LogLevel.Error,"Failed to start the connection. "+a),this.connectionState=2,this.transport=null,a;case 6:return[2]}})})},e.prototype.createTransport=function(e,t){if((null===e||void 0===e)&&t.length>0&&(e=u.TransportType[t[0]]),e===u.TransportType.WebSockets&&t.indexOf(u.TransportType[e])>=0)return new u.WebSocketTransport(this.options.accessTokenFactory,this.logger);if(e===u.TransportType.ServerSentEvents&&t.indexOf(u.TransportType[e])>=0)return new u.ServerSentEventsTransport(this.httpClient,this.options.accessTokenFactory,this.logger);if(e===u.TransportType.LongPolling&&t.indexOf(u.TransportType[e])>=0)return new u.LongPollingTransport(this.httpClient,this.options.accessTokenFactory,this.logger);if(this.isITransport(e))return e;throw new Error("No available transports found.")},e.prototype.isITransport=function(e){return"object"==typeof e&&"connect"in e},e.prototype.changeState=function(e,t){return this.connectionState==e&&(this.connectionState=t,!0)},e.prototype.send=function(e){if(1!=this.connectionState)throw new Error("Cannot send data if the connection is not in the 'Connected' State");return this.transport.send(e)},e.prototype.stop=function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:t=this.connectionState,this.connectionState=2,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.startPromise];case 2:return n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return this.stopConnection(1==t,e),[2]}})})},e.prototype.stopConnection=function(e,t){this.transport&&(this.transport.stop(),this.transport=null),t?this.logger.log(c.LogLevel.Error,"Connection disconnected with error '"+t+"'."):this.logger.log(c.LogLevel.Information,"Connection disconnected."),this.connectionState=2,e&&this.onclose&&this.onclose(t)},e.prototype.resolveUrl=function(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if("undefined"==typeof window||!window||!window.document)throw new Error("Cannot resolve '"+e+"'.");var t=window.document.createElement("a");t.href=e;var n=t.protocol&&":"!==t.protocol?t.protocol+"//"+t.host:window.document.location.protocol+"//"+(t.host||window.document.location.host);e&&"/"==e[0]||(e="/"+e);var r=n+e;return this.logger.log(c.LogLevel.Information,"Normalizing '"+e+"' to '"+r+"'"),r},e.prototype.resolveNegotiateUrl=function(e){var t=e.indexOf("?"),n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",n+=-1===t?"":e.substring(t)},e}();n.HttpConnection=i});o(p);p.HttpConnection;var d=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subject=e,this.observer=t}return e.prototype.dispose=function(){var e=this.subject.observers.indexOf(this.observer);e>-1&&this.subject.observers.splice(e,1),0===this.subject.observers.length&&this.subject.cancelCallback().catch(function(e){})},e}();t.Subscription=n;var r=function(){function e(e){this.observers=[],this.cancelCallback=e}return e.prototype.next=function(e){for(var t=0,n=this.observers;t<n.length;t++){n[t].next(e)}},e.prototype.error=function(e){for(var t=0,n=this.observers;t<n.length;t++){var r=n[t];r.error&&r.error(e)}},e.prototype.complete=function(){for(var e=0,t=this.observers;e<t.length;e++){var n=t[e];n.complete&&n.complete()}},e.prototype.subscribe=function(e){return this.observers.push(e),new n(this,e)},e}();t.Subject=r});o(d);d.Subscription,d.Subject;var f=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.write=function(t){return""+t+e.RecordSeparator},e.parse=function(t){if(t[t.length-1]!=e.RecordSeparator)throw new Error("Message is incomplete.");var n=t.split(e.RecordSeparator);return n.pop(),n},e.RecordSeparator=String.fromCharCode(30),e}();t.TextMessageFormat=n});o(f);f.TextMessageFormat;var g=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.JSON_HUB_PROTOCOL_NAME="json";var n=function(){function e(){this.name=t.JSON_HUB_PROTOCOL_NAME,this.type=1}return e.prototype.parseMessages=function(e){if(!e)return[];for(var t=f.TextMessageFormat.parse(e),n=[],r=0;r<t.length;++r)n.push(JSON.parse(t[r]));return n},e.prototype.writeMessage=function(e){return f.TextMessageFormat.write(JSON.stringify(e))},e}();t.JsonHubProtocol=n});o(g);g.JSON_HUB_PROTOCOL_NAME,g.JsonHubProtocol;var v=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.wrappedProtocol=e,this.name=this.wrappedProtocol.name,this.type=1}return e.prototype.parseMessages=function(e){var t=e.indexOf(":");if(-1==t||";"!=e[e.length-1])throw new Error("Invalid payload.");var n=e.substring(0,t);if(!/^[0-9]+$/.test(n))throw new Error("Invalid length: '"+n+"'");if(parseInt(n,10)!=e.length-t-2)throw new Error("Invalid message size.");for(var r=e.substring(t+1,e.length-1),o=atob(r),i=new Uint8Array(o.length),s=0;s<i.length;s++)i[s]=o.charCodeAt(s);return this.wrappedProtocol.parseMessages(i.buffer)},e.prototype.writeMessage=function(e){for(var t=new Uint8Array(this.wrappedProtocol.writeMessage(e)),n="",r=0;r<t.byteLength;r++)n+=String.fromCharCode(t[r]);var o=btoa(n);return o.length.toString()+":"+o+";"},e}();t.Base64EncodedHubProtocol=n});o(v);v.Base64EncodedHubProtocol;var w=i(function(t,n){var r=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=e&&e.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.JsonHubProtocol=g.JsonHubProtocol;var i=3e4,s=function(){function e(e,t){void 0===t&&(t={});var n=this;t=t||{},this.timeoutInMilliseconds=t.timeoutInMilliseconds||i,this.connection="string"==typeof e?new p.HttpConnection(e,t):e,this.logger=h.LoggerFactory.createLogger(t.logger),this.protocol=t.protocol||new g.JsonHubProtocol,this.connection.onreceive=function(e){return n.processIncomingData(e)},this.connection.onclose=function(e){return n.connectionClosed(e)},this.callbacks=new Map,this.methods=new Map,this.closedCallbacks=[],this.id=0}return e.prototype.processIncomingData=function(e){void 0!==this.timeoutHandle&&clearTimeout(this.timeoutHandle);for(var t=this.protocol.parseMessages(e),n=0;n<t.length;++n){var r=t[n];switch(r.type){case 1:this.invokeClientMethod(r);break;case 2:case 3:var o=this.callbacks.get(r.invocationId);null!=o&&(3===r.type&&this.callbacks.delete(r.invocationId),o(r));break;case 6:break;default:this.logger.log(c.LogLevel.Warning,"Invalid message type: "+e)}}this.configureTimeout()},e.prototype.configureTimeout=function(){var e=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout(function(){return e.serverTimeout()},this.timeoutInMilliseconds))},e.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},e.prototype.invokeClientMethod=function(e){var t=this,n=this.methods.get(e.target.toLowerCase());if(n){if(n.forEach(function(n){return n.apply(t,e.arguments)}),e.invocationId){var r="Server requested a response, which is not supported in this version of the client.";this.logger.log(c.LogLevel.Error,r),this.connection.stop(new Error(r))}}else this.logger.log(c.LogLevel.Warning,"No client method with the name '"+e.target+"' found.")},e.prototype.connectionClosed=function(e){var t=this;this.callbacks.forEach(function(t){t(void 0,e||new Error("Invocation canceled due to connection being closed."))}),this.callbacks.clear(),this.closedCallbacks.forEach(function(n){return n.apply(t,[e])}),this.cleanupTimeout()},e.prototype.start=function(){return r(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return e=2===this.protocol.type?2:1,this.connection.features.transferMode=e,[4,this.connection.start()];case 1:return n.sent(),t=this.connection.features.transferMode,[4,this.connection.send(f.TextMessageFormat.write(JSON.stringify({protocol:this.protocol.name})))];case 2:return n.sent(),this.logger.log(c.LogLevel.Information,"Using HubProtocol '"+this.protocol.name+"'."),2===e&&1===t&&(this.protocol=new v.Base64EncodedHubProtocol(this.protocol)),this.configureTimeout(),[2]}})})},e.prototype.stop=function(){return this.cleanupTimeout(),this.connection.stop()},e.prototype.stream=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.createStreamInvocation(e,n),i=new d.Subject(function(){var e=t.createCancelInvocation(o.invocationId),n=t.protocol.writeMessage(e);return t.callbacks.delete(o.invocationId),t.connection.send(n)});this.callbacks.set(o.invocationId,function(e,t){if(t)i.error(t);else if(3===e.type){var n=e;n.error?i.error(new Error(n.error)):i.complete()}else i.next(e.item)});var s=this.protocol.writeMessage(o);return this.connection.send(s).catch(function(e){i.error(e),t.callbacks.delete(o.invocationId)}),i},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.createInvocation(e,t,!0),o=this.protocol.writeMessage(r);return this.connection.send(o)},e.prototype.invoke=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.createInvocation(e,n,!1);return new Promise(function(e,n){t.callbacks.set(o.invocationId,function(t,r){if(r)n(r);else if(3===t.type){var o=t;o.error?n(new Error(o.error)):e(o.result)}else n(new Error("Unexpected message type: "+t.type))});var r=t.protocol.writeMessage(o);t.connection.send(r).catch(function(e){n(e),t.callbacks.delete(o.invocationId)})})},e.prototype.on=function(e,t){e&&t&&(e=e.toLowerCase(),this.methods.has(e)||this.methods.set(e,[]),this.methods.get(e).push(t))},e.prototype.off=function(e,t){if(e&&t){e=e.toLowerCase();var n=this.methods.get(e);if(n){var r=n.indexOf(t);-1!=r&&n.splice(r,1)}}},e.prototype.onclose=function(e){e&&this.closedCallbacks.push(e)},e.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},e.prototype.createInvocation=function(e,t,n){if(n)return{type:1,target:e,arguments:t};var r=this.id;return this.id++,{type:1,invocationId:r.toString(),target:e,arguments:t}},e.prototype.createStreamInvocation=function(e,t){var n=this.id;return this.id++,{type:4,invocationId:n.toString(),target:e,arguments:t}},e.prototype.createCancelInvocation=function(e){return{type:5,invocationId:e}},e}();n.HubConnection=s});o(w);w.JsonHubProtocol,w.HubConnection;var y=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0})});o(y);var m=i(function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(s),n(a),n(p),n(w),n(y),n(c),n(h),n(u),n(d)});return o(m),o(i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(m)}))},e.exports=r()}).call(this,n(27),n(26))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=class{constructor(e,t,n,o){this.target=e,this.border=t,this.cameraElasticity=n,this.cameraFriction=o,this.action=((e,t,n,o)=>{let i=e.getWorldPos(),s=t.getFocus(),a=new r.Vector(t.dx,t.dy);const c=i.sub(s).scale(this.cameraElasticity),l=(a=a.add(c)).scale(-1).scale(this.cameraFriction);a=a.add(l),s=s.add(a);const u=Math.min(Math.max(n.halfDrawWidth,s.x),this.border.x-n.halfDrawWidth),h=Math.min(Math.max(n.halfDrawHeight,s.y),this.border.y-n.halfDrawHeight);return new r.Vector(u,h)})}}},function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i,s=n(1);!function(e){e[e.TMX=0]="TMX",e[e.JSON=1]="JSON"}(i=t.TiledMapFormat||(t.TiledMapFormat={}));var a=function(e){function t(t,n){void 0===n&&(n=i.JSON);var r=this;switch(n){case i.JSON:r=e.call(this,t,"json")||this;break;default:throw"The format "+n+" is not currently supported. Please export Tiled map as JSON."}return r.mapFormat=n,r.imagePathAccessor=r.externalTilesetPathAccessor=function(e,n){if(0===e.indexOf("/"))return e;var r=t.split("/"),o=r.concat([]);return r.length>0&&o.splice(-1),o.push(e),o.join("/")},r}return o(t,e),t.prototype.load=function(){var t=this,n=new s.Promise;return e.prototype.load.call(this).then(function(e){var r=[];t.data.tilesets.forEach(function(e){if(e.source){var n=new s.Resource(t.externalTilesetPathAccessor(e.source,e),"json");r.push(n.load().then(function(t){Object.assign(e,t)}))}}),s.Promise.join.apply(t,r).then(function(){r=[],t.data.tilesets.forEach(function(e){var n=new s.Texture(t.imagePathAccessor(e.image,e));e.imageTexture=n,r.push(n.load()),s.Logger.getInstance().debug("[Tiled] Loading associated tileset: "+e.image)}),s.Promise.join.apply(t,r).then(function(){n.resolve(e)},function(e){n.reject(e)})},function(e){n.reject(e)})}),n},t.prototype.processData=function(e){if("object"!=typeof e)throw"Tiled map resource "+this.path+" is not the correct content type";if(void 0===e)throw"Tiled map resource "+this.path+" is empty";switch(this.mapFormat){case i.JSON:return c(e)}},t.prototype.getTilesetForTile=function(e){for(var t=this.data.tilesets.length-1;t>=0;t--){var n=this.data.tilesets[t];if(n.firstgid<=e)return n}return null},t.prototype.getTileMap=function(){for(var e=new s.TileMap(0,0,this.data.tilewidth,this.data.tileheight,this.data.height,this.data.width),t=0,n=this.data.tilesets;t<n.length;t++){var r=n[t],o=Math.floor(r.imagewidth/r.tilewidth),i=Math.floor(r.imageheight/r.tileheight),a=new s.SpriteSheet(r.imageTexture,o,i,r.tilewidth,r.tileheight);e.registerSpriteSheet(r.firstgid.toString(),a)}for(var c=0,l=this.data.layers;c<l.length;c++){var u=l[c];if("tilelayer"===u.type)for(var h=0;h<u.data.length;h++){var p=u.data[h];if(0!==p){r=this.getTilesetForTile(p);e.data[h].sprites.push(new s.TileSprite(r.firstgid.toString(),p-r.firstgid))}}}return e},t}(s.Resource);t.default=a;var c=function(e){if(e.layers)for(var t=0,n=e.layers;t<n.length;t++){var r=n[t];"string"==typeof r.data?"base64"===r.encoding&&(r.data=l.decompressBase64(r.data,r.encoding)):r.data=l.decompressCsv(r.data)}return e},l={decompressCsv:function(e){return e},decompressBase64:function(e,t){var n,r,o,i,s,a;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c="undefined"!=typeof Uint8Array?Uint8Array:Array,l="+".charCodeAt(0),u="/".charCodeAt(0),h="0".charCodeAt(0),p="a".charCodeAt(0),d="A".charCodeAt(0),f="-".charCodeAt(0),g="_".charCodeAt(0);function v(e){var t=e.charCodeAt(0);return t===l||t===f?62:t===u||t===g?63:t<h?-1:t<h+10?t-h+26+26:t<d+26?t-d:t<p+26?t-p+26:void 0}var w=e.length;s="="===e.charAt(w-2)?2:"="===e.charAt(w-1)?1:0,a=new c(3*e.length/4-s),o=s>0?e.length-4:e.length;var y=0;function m(e){a[y++]=e}for(n=0,r=0;n<o;n+=4,r+=3)m((16711680&(i=v(e.charAt(n))<<18|v(e.charAt(n+1))<<12|v(e.charAt(n+2))<<6|v(e.charAt(n+3))))>>16),m((65280&i)>>8),m(255&i);2===s?m(255&(i=v(e.charAt(n))<<2|v(e.charAt(n+1))>>4)):1===s&&(m((i=v(e.charAt(n))<<10|v(e.charAt(n+1))<<4|v(e.charAt(n+2))>>2)>>8&255),m(255&i));var b=function(e){for(var t=0,n=e.length-1;n>=0;n--)t=256*t+1*e[n];return t},S=a.length/4,_=new Array(S);for(n=0;n<S;n++)_[n]=b(a.slice(4*n,4*n+3));return _}}},function(t,n){t.exports=e}])},e.exports=r(n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9),o=n(4),i=n(0),s=n(8);t.default=class extends o.default{constructor(e,t){super(e,t,0,0),this.spriteSheet=r.default(),this.fireTarget=null,this.laserSalbe=null,this.swabra=null,this.gunFireKillInterval=null,this.nextPosition=i.Vector.Zero,this.setWidth(this.spriteSheet.width),this.setHeight(this.spriteSheet.height),this.collisionType=i.CollisionType.Active;const n=new i.Actor(e,t,20,100).collisionArea;n.body=this.body,this.collisionArea=n}onInitialize(e){super.onInitialize(e),this.registerDrawing({idle:{up:this.spriteSheet.idle.up(),down:this.spriteSheet.idle.down(),right:this.spriteSheet.idle.right(),left:this.spriteSheet.idle.left(),up_left:this.spriteSheet.idle.up_left(),up_right:this.spriteSheet.idle.up_right(),down_left:this.spriteSheet.idle.down_left(),down_right:this.spriteSheet.idle.down_left()},walk:{up:this.spriteSheet.walk.up(e,75),up_right:this.spriteSheet.walk.up_right(e,75),up_left:this.spriteSheet.walk.up_left(e,75),down:this.spriteSheet.walk.down(e,75),down_right:this.spriteSheet.walk.down_right(e,75),down_left:this.spriteSheet.walk.down_left(e,75),right:this.spriteSheet.walk.right(e,75),left:this.spriteSheet.walk.left(e,75)}})}update(e,t){super.update(e,t);const n=this.nextPosition.sub(this.pos);n.equals(i.Vector.Zero)||(this.pos=this.nextPosition),this.fireTarget&&(this.direction=n,null==this.laserSalbe&&(this.laserSalbe=new s.default(()=>i.Vector.Zero),this.add(this.laserSalbe)),this.laserSalbe.target=this.fireTarget)}set setFireTarget(e){this.gunFireKillInterval&&clearInterval(this.gunFireKillInterval),this.fireTarget=e,this.gunFireKillInterval=setInterval(()=>{this.fireTarget=null,this.laserSalbe&&(this.remove(this.laserSalbe),this.laserSalbe=null)},100)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(31),i=n(1),s=n(29),a=n(3),c=n(25),l=n(24),u=n(17),h=n(14),p=n(6),d=n(10);t.Level1=class extends r.Scene{onInitialize(e){p.GUI.showLoader();const t=i.Resources.Level1.getTileMap(),n=new r.Vector(t.cellWidth*t.cols,t.cellHeight*t.rows);new d.default(100,100,0),this.add(t),a.GameService.connection.on("me",e=>{const t=new l.default(e.position.x,e.position.y);a.GameService.saveUser({user:e,actor:t}),this.add(t),this.camera.addStrategy(new s.default(t,n,.7,.8)),p.GUI.hideLoader(),p.GUI.showWelcome(),setTimeout(()=>{p.GUI.hideWelcome(),p.GUI.showScore()},7500)});const f=e=>{if(e&&e.type===c.GameObjectType.Player&&!a.GameService.userInGame(e.id)){const t=new o.default(e.position.x,e.position.y);this.add(t),a.GameService.saveOtherPlayer({user:e,actor:t}),p.GUI.setPlayersCount(a.GameService.countPlayers())}if(e&&e.type===c.GameObjectType.Fowl&&!a.GameService.fowlInGame(e.id)){const t=new u.default(e.position.x,e.position.y);this.add(t),a.GameService.saveFowl({user:e,actor:t})}if(e&&e.type===c.GameObjectType.Shit&&!a.GameService.fowlInGame(e.id)){const t=new h.default(e.position.x,e.position.y);this.add(t),a.GameService.saveFowl({user:e,actor:t})}};a.GameService.connection.on("scores",e=>{const t=a.GameService.getCurrentUser(),n=e.find(e=>e.gameObjectId===t.user.id);t.actor.score=n.scores,a.GameService.storeScores(e),p.GUI.updateScore(e)}),a.GameService.connection.on("gameObjectsJoin",e=>e.forEach(f)),a.GameService.connection.on("gameObjects",e=>e.forEach(f)),a.GameService.connection.on("gameObjectMove",(e,t)=>{const n=a.GameService.getActor(e);n&&(n.nextPosition=new r.Vector(t.x,t.y))}),a.GameService.connection.on("playerStateNumber",e=>{}),a.GameService.connection.on("gameObjectAttack",(e,t)=>{const n=a.GameService.getActor(e);n&&(n.setFireTarget=new r.Vector(t.x,t.y))}),a.GameService.connection.on("gameObjectLeave",e=>{const t=a.GameService.getActor(e);t&&t.kill();const n=a.GameService.getUserById(e);n&&(a.GameService.kickUser(n),p.GUI.setPlayersCount(a.GameService.countPlayers()))}),a.GameService.connection.on("gameEnd",()=>{a.GameService.kickCurrentUser()})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(32);t.Game=class extends r.Engine{constructor(){super({displayMode:r.DisplayMode.FullScreen})}start(e){return this.add("level1",new o.Level1),super.start(e).then(()=>{this.goToScene("level1")})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(33),i=n(1),s=n(3),a=n(6),c=new o.Game,l=(a.GUI.init(),new r.Loader);l.addResources(i.Resources.values()),c.start(l).then(()=>{console.log("Started"),i.Resources.MainTheme.play(.3),i.Resources.MainTheme.setLoop(!0),s.GameService.start()})}]);
//# sourceMappingURL=game.js.map